{% extends 'challenge/base.html' %}
{% load bootstrap5 %}
{% load static %}
{% load challenge_extras %}

{% load crispy_forms_tags %}
{% load crispy_forms_filters %}

{% block content %}
    <div class="container">
    <h4>Transaction Entry</h4>

        <form method="post">
            <div class="row g-5">
                <div class="col-md-5 col-lg-4 order-md-last">
                    <h6 class="d-flex justify-content-between align-items-center mb-3">
                    <span class="text-primary">Your Account</span>
                    </h6>
                    <ul class="list-group mb-3">
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">Holding Count</div>
                            <span class="text-muted">{{ holding_count }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">Transaction Count</div>
                            <span class="text-muted">{{ txn_count }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">Cash Balance Before</div>
                            <span id="cash_before" class="text-muted">{{ cash|currency }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">This Transaction</div>
                            <span class="text-muted">$8</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">Cash Balance After</div>
                            <span class="text-muted">$5</span>
                        </li>
                    </ul>

                    <h6 class="d-flex justify-content-between align-items-center mb-3">
                    <span class="text-primary">Market Data</span>
                    </h6>
                    <ul class="list-group mb-3">
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">Day Range</div>
                            <span class="text-muted" id="day_range"></span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">Volume</div>
                            <span class="text-muted" id="volume"></span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">Dividend Yeild</div>
                            <span class="text-muted" id="div_yield"></span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">52 Week Range</div>
                            <span class="text-muted" id="year_range"></span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div class="my-0">Target Price</div>
                            <span class="text-muted" id="target_price"></span>
                        </li>
                    </ul>

                </div>

                {% csrf_token %}
                <div class="col-md-7 col-lg-8">
                    {{ form.symbol|as_crispy_field }}
                    {{ form.activity|as_crispy_field }}
                    {{ form.quantity|as_crispy_field }}
                    {{ form.price|as_crispy_field }}
                    {{ form.amount|as_crispy_field }}
                    <br>
                    <input type="submit" class="btn btn-primary" value="Save">
                </div>
            </div>
        </form>
    </div>

{% endblock %}
